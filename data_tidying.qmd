---
title: "Project 2: Data Tidying"
author: "Lucy Watts, Natalie Lau, Catherine Weeks, and Nandir Altansukh"
format: html
---

## Data Tidying

```{r}
# Import libraries and set up
library(tidyverse)
library(readr)
library(lubridate)
```

```{r}
spotify_songs_raw <- read.csv("spotify_songs.csv")

spotify_songs_cleaned <- spotify_songs_raw |>
  mutate(release_date = ymd(track_album_release_date)) |>
  select(track_id, track_name, track_artist, track_popularity, release_date, danceability, energy, key, loudness, mode, tempo) |>
  filter(year(release_date) == 2019, str_detect(track_name, 'Remix|Remaster|Remastered|REMIX|remix') == FALSE) |>
  unique() |>
  mutate(ranking = percent_rank(track_popularity)*100) |>
  filter(ranking >= 90) |>
  arrange(desc(ranking))
```
